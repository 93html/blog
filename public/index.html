<!doctype html><html class="theme-next muse use-motion"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css"><meta name="keywords" content="Hexo, NexT"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1"><meta property="og:type" content="website"><meta property="og:title" content="Zehao's Blog"><meta property="og:url" content="https://www.93html.com/index.html"><meta property="og:site_name" content="Zehao's Blog"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Zehao's Blog"><script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Muse",sidebar:{position:"left",display:"hide"},fancybox:!0,motion:!0,duoshuo:{userId:0,author:"åšä¸»"}}</script><title>Zehao's Blog</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container one-collumn sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Zehao's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">è™½åƒä¸‡é‡Œ å¾å¾€çŸ£</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section">é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section">å½’æ¡£</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2017/01/05/äº”çº¿è°±è§†è°±ç»ƒä¹ ç¨‹åº/" itemprop="url">äº”çº¿è°±è§†è°±ç»ƒä¹ ç¨‹åº</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time itemprop="dateCreated" datetime="2017-01-05T16:21:00+08:00" content="2017-01-05">2017-01-05 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>äº”çº¿è°±è§†è°±ç»ƒä¹ ç¨‹åºï¼Œç§»åŠ¨ç«¯è®¿é—®</p><p><img src="https://i1.piimg.com/567571/4cc46b753fca58cd.jpg" width="200"></p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2016/12/28/å…¨ç«™-HTTPS-å•¦ï¼/" itemprop="url">å…¨ç«™ HTTPS å•¦ï¼</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time itemprop="dateCreated" datetime="2016-12-28T11:38:22+08:00" content="2016-12-28">2016-12-28 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>ä¸»è¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p><h2 id="Hexo-Next-ä¸»é¢˜èœå•é“¾æ¥"><a href="#Hexo-Next-ä¸»é¢˜èœå•é“¾æ¥" class="headerlink" title="Hexo Next ä¸»é¢˜èœå•é“¾æ¥"></a>Hexo Next ä¸»é¢˜èœå•é“¾æ¥</h2><p>Next çš„èœå•é“¾æ¥æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœåœ¨ github pages éƒ¨ç½²ç”¨çš„ç¬¬ä¸‰æ–¹åŸŸåï¼ˆé»˜è®¤åŸŸåç”¨æˆ·å¯èƒ½æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œé¦–é¡µæ˜¯ https çš„ï¼Œç‚¹å‡»èœå•åä¼šå˜æˆ httpï¼Œæˆ‘çœ‹äº†ä¸‹è¯·æ±‚å‘ç°è¯·æ±‚ç¡®å®æ˜¯ https ä½†æ˜¯ä¼š 301 æˆ httpï¼Œæˆ‘å°±è´¹è§£äº†ï¼Œæœ€ååœ¨è¿™ä¸ª <a href="https://github.com/iissnan/hexo-theme-next/issues/1187#issuecomment-257788310" target="_blank" rel="external">issue</a> é‡Œå‘ç°äº†ç­”æ¡ˆï¼Œåœ¨é“¾æ¥æœ€ååŠ ä¸Š â€˜/â€˜ å³å¯</p><h2 id="CloudFlare-è®¾ç½®-Page-Rules"><a href="#CloudFlare-è®¾ç½®-Page-Rules" class="headerlink" title="CloudFlare è®¾ç½® Page Rules"></a>CloudFlare è®¾ç½® Page Rules</h2><p>è®¾ç½®æ–¹æ³•ï¼šPage Rules -&gt; Create Page rule -&gt; Add a Setting -&gt; Always Use HTTPS<br>ç„¶åæŠŠ <a href="http://xxx.com/*" target="_blank" rel="external">http://xxx.com/*</a> æ·»åŠ è¿›å»ï¼Œè¿™æ ·å°±ä¼šå¼ºåˆ¶ 301 åˆ° https ä¸Šäº†</p><p>å“¦ï¼Œä»Šå¤©è¿˜æŠŠä¸»é¢˜é‡Œçš„ Google Fonts å»æ‰äº†ï¼Œè¿˜è£…äº† <a href="https://github.com/chenzhutian/hexo-all-minifier" target="_blank" rel="external">hexo-all-minifier</a> æ’ä»¶ï¼Œæ‰“å¼€é€Ÿåº¦å¤§å¹…æå‡</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2016/12/27/Webpack-åŸºæœ¬æ¦‚å¿µ/" itemprop="url">Webpack åŸºæœ¬æ¦‚å¿µ</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time itemprop="dateCreated" datetime="2016-12-27T12:40:10+08:00" content="2016-12-27">2016-12-27 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>Webpack çš„æ ¸å¿ƒæ¦‚å¿µå¯ä»¥åˆ†ä¸ºï¼šEntry pointï¼ŒChunkï¼ŒModuleï¼Œè¿™ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¯ä»¥ç”¨ä¸€å¼ å®˜æ–¹å›¾ç‰‡æ¥è§£é‡Šï¼š</p><p><img src="https://webpack.github.io/assets/HMR.svg" alt="generated update chunks"></p><h2 id="Entry-point"><a href="#Entry-point" class="headerlink" title="Entry point"></a><a href="http://webpack.github.io/docs/configuration.html#entry" target="_blank" rel="external">Entry point</a></h2><p>Entry point æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼ŒæŒ‡çš„æ˜¯ç¨‹åºçš„å…¥å£æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ Webpack è§£æä¾èµ–çš„å…¥å£æ–‡ä»¶ï¼ŒEntry point å¯ä»¥è®¾ç½®å•å…¥å£æˆ–è€…å¤šå…¥å£ï¼Œä»¥ä¸€ä¸ªæœ€ç®€å•çš„å…¥å£æ–‡ä»¶ä¸ºä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</div><div class="line"></div><div class="line">a();</div></pre></td></tr></table></figure><h2 id="Chunk"><a href="#Chunk" class="headerlink" title="Chunk"></a>Chunk</h2><p>Chunk æŒ‡çš„æ˜¯ç»è¿‡ç¼–è¯‘åçš„ä»£ç åŒ…ï¼ŒWebpack ä¼šå°†æ¯ä¸ªç”±ç”¨æˆ·å®šä¹‰çš„æ¨¡å—ï¼Œè½¬æ¢æˆ Chunk çš„å½¢å¼ï¼Œè¿™äº› Chunk æœ€ç»ˆæ±‡æ€»åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¾›è¿è¡Œæ—¶è°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åŸå§‹çš„ a.js</span></div><div class="line"><span class="built_in">module</span>.export = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'Hello'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// ç»è¿‡ç¼–è¯‘åçš„ chunk</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"><span class="meta">    'use strict'</span>;</div><div class="line"></div><div class="line">    <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        alert(<span class="string">'Hello'</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™é‡Œ Chunk è½¬æ¢çš„è¿‡ç¨‹ä¸­è¿˜ä¼šè°ƒç”¨ Loadersï¼ŒLoaders çš„ä½œç”¨æ˜¯å°†é JS èµ„æºè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æä¾›è¿è¡Œæ—¶è§£æè¿™äº›å­—ç¬¦ä¸²çš„åŠŸèƒ½</p><p>æœ€ç»ˆ Webpack ä¸ºæ¨¡å—ä»£ç å¤–é¢åŒ…äº†ä¸€å±‚ functionï¼Œå¹¶ä¸”æ³¨å…¥äº† <code>module</code>ã€<code>exports</code> å’Œ <code>__webpack_require__</code> 3ä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°çš„å®šä¹‰çœ‹ä¸‹æ–‡ä»£ç ç¤ºä¾‹ä¸­çš„ <code>require</code> æ–¹æ³•</p><h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>Module æ˜¯æ‹¥æœ‰å¦‚ä¸‹ç»“æ„çš„ä¸€ä¸ª <code>Object</code>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¿å­˜ Chunk çš„ä¿¡æ¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">exports</span>: &#123;&#125;,</div><div class="line">    <span class="attr">id</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">loaded</span>: <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¸€ä¸ª Module å¯¹åº”ä¸€ä¸ª Chunkï¼Œ<code>exports</code> ä¿å­˜äº† Chunk ä¸­è¾“å‡ºçš„å†…å®¹ï¼Œ<code>id</code> ä¸º Chunk çš„ç´¢å¼•ï¼Œ<code>loaded</code> è®°å½• Chunk æ˜¯å¦åŠ è½½</p><h2 id="å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>Webpack Runtime çš„ä¸€ä¸ªç®€å•å®ç°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> chunks = [</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"><span class="meta">        'use strict'</span>;</div><div class="line"></div><div class="line">        <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            alert(<span class="string">'Hello'</span>);</div><div class="line">        &#125;;</div><div class="line">    &#125;,</div><div class="line">    ...</div><div class="line">];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">require</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="comment">// å®šä¹‰ module å¯¹è±¡</span></div><div class="line">    <span class="keyword">var</span> <span class="built_in">module</span> = &#123;</div><div class="line">        <span class="attr">exports</span>: &#123;&#125;,</div><div class="line">        <span class="attr">id</span>: moduleId,</div><div class="line">        <span class="attr">loaded</span>: <span class="literal">false</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">// æ‰§è¡Œ chunk</span></div><div class="line">    chunks[id].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, <span class="built_in">require</span>);</div><div class="line"></div><div class="line">    <span class="built_in">module</span>.loaded = <span class="literal">true</span>;</div><div class="line"></div><div class="line">    <span class="comment">// è¿”å› module çš„è¾“å‡ºéƒ¨åˆ†</span></div><div class="line">	<span class="keyword">return</span> <span class="built_in">module</span>.exports;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// entry point</span></div><div class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="number">0</span>); <span class="comment">// è¿™é‡Œçš„ require('./a') ä¼šè¢«æ›¿æ¢ä¸º chunk çš„ç´¢å¼•</span></div><div class="line"></div><div class="line">a();</div><div class="line"><span class="comment">//</span></div></pre></td></tr></table></figure></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2016/12/24/å¤§å¹…æå‡-React-æ€§èƒ½çš„6ä¸ªå»ºè®®/" itemprop="url">å¤§å¹…æå‡ React æ€§èƒ½çš„6ä¸ªå»ºè®®</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time itemprop="dateCreated" datetime="2016-12-24T14:19:21+08:00" content="2016-12-24">2016-12-24 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>React åœ¨ä¸åšä»»ä½•ä¼˜åŒ–çš„æƒ…å†µä¸‹æ€§èƒ½ä¹Ÿéå¸¸å¥½ï¼Œç„¶è€Œé€šè¿‡ä¸€äº›å°å°çš„ä¼˜åŒ–ï¼Œå¯ä»¥è®©æ€§èƒ½è¿›ä¸€æ­¥æå‡ï¼Œé€šè¿‡ä»¥ä¸‹è¿™6æ¡å»ºè®®ï¼Œå¯ä»¥æ•°åå€åŠ å¿«æ¸²æŸ“é€Ÿåº¦</p><h2 id="è®¾ç½®-NODE-ENV-ä¸º-Production"><a href="#è®¾ç½®-NODE-ENV-ä¸º-Production" class="headerlink" title="è®¾ç½® NODE_ENV ä¸º Production"></a>è®¾ç½® NODE_ENV ä¸º Production</h2><p>React åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæœ‰å®Œæ•´çš„è­¦å‘Šå’Œé”™è¯¯æ£€æŸ¥ï¼Œä½†å®ƒä»¬ä¸æ˜¯ä¸ºç”Ÿäº§ç¯å¢ƒå‡†å¤‡çš„ï¼Œå¦‚æœä½ çœ‹è¿‡ React çš„æºç ï¼Œä½ ä¼šçœ‹åˆ°å¾ˆå¤š <code>if (process.env.NODE_ENV != &#39;production&#39;)</code>ï¼Œè¿™äº›ä»£ç å¯¹äºæœ€ç»ˆç”¨æˆ·æ˜¯ä¸éœ€è¦çš„ï¼Œè€Œä¸”è®¿é—® <code>process.env.NODE_ENV</code> ä¼šéå¸¸æ…¢ï¼Œå¯¹äºç”Ÿäº§ç¯å¢ƒè€Œè¨€ï¼Œå®Œå…¨å¯ä»¥ç§»é™¤è¿™äº›ä»£ç </p><p>å¦‚æœä½ ä½¿ç”¨ <a href="https://webpack.github.io/" target="_blank" rel="external">Webpack</a>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://webpack.github.io/docs/list-of-plugins.html#defineplugin" target="_blank" rel="external">DefinePlugin</a> æ¥æ›¿æ¢ <code>process.env.NODE_ENV</code> ä¸º â€˜productionâ€™ï¼Œç„¶åä½¿ç”¨ <a href="https://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin" target="_blank" rel="external">UglifyJsPlugin</a> ç§»é™¤è¿™äº›ä¸ä¼šæ‰§è¡Œçš„ä»£ç <br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// webpack.config.js</span></div><div class="line">...</div><div class="line">plugins: [</div><div class="line">    <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">        <span class="string">'process.env.NODE_ENV'</span>: <span class="built_in">JSON</span>.stringify(<span class="string">'production'</span>)</div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">        <span class="attr">compress</span>: &#123;</div><div class="line">            <span class="attr">warnings</span>: <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">]</div><div class="line">...</div></pre></td></tr></table></figure><p></p><h2 id="React-15-çš„æ¸²æŸ“é€Ÿåº¦æ¯”-0-14-å¿«çº¦-25"><a href="#React-15-çš„æ¸²æŸ“é€Ÿåº¦æ¯”-0-14-å¿«çº¦-25" class="headerlink" title="React 15 çš„æ¸²æŸ“é€Ÿåº¦æ¯” 0.14 å¿«çº¦ 25%"></a>React 15 çš„æ¸²æŸ“é€Ÿåº¦æ¯” 0.14 å¿«çº¦ 25%</h2><p>åœ¨ <a href="https://facebook.github.io/react/blog/2016/04/07/react-v15.html" target="_blank" rel="external">React 15 çš„æ›´æ–°</a>ä¸­éå¸¸é‡è¦çš„ä¸€é¡¹æ˜¯ï¼Œä½¿ç”¨åœ¨ç°ä»£åŒ–æµè§ˆå™¨ä¸­æ€§èƒ½æ›´å¥½çš„ <code>document.createElement</code> æ›¿æ¢ <code>innerHTML</code>ï¼Œè¿™ä¸€æ”¹åŠ¨ä¹Ÿæ„å‘³ç€ React å°†ä¸å†æ”¯æŒ IE8</p><h2 id="Babel-Constant-å’Œ-Inline-Elements-è½¬æ¢"><a href="#Babel-Constant-å’Œ-Inline-Elements-è½¬æ¢" class="headerlink" title="Babel Constant å’Œ Inline Elements è½¬æ¢"></a>Babel Constant å’Œ Inline Elements è½¬æ¢</h2><p>Babel ä¸ºå¼€å‘è€…ä»¬æä¾›äº† <a href="http://babeljs.io/docs/plugins/transform-react-constant-elements/" target="_blank" rel="external">React Constant Elements</a> å’Œ <a href="https://babeljs.io/docs/plugins/transform-react-inline-elements/" target="_blank" rel="external">React Inline Elements</a>ï¼Œè¿™ä¸¤æ¬¾æ’ä»¶èƒ½å¤Ÿåœ¨ç¼–è¯‘é˜¶æ®µå°†ä»£ç è½¬æ¢æˆæ›´é«˜æ•ˆçš„å½¢å¼ï¼Œæ³¨æ„ä»…å°†å®ƒä»¬ç”¨äºç”Ÿäº§ç¯å¢ƒ</p><h2 id="å°è£…é›†åˆæ¸²æŸ“ä¸ºç‹¬ç«‹ç»„ä»¶"><a href="#å°è£…é›†åˆæ¸²æŸ“ä¸ºç‹¬ç«‹ç»„ä»¶" class="headerlink" title="å°è£…é›†åˆæ¸²æŸ“ä¸ºç‹¬ç«‹ç»„ä»¶"></a>å°è£…é›†åˆæ¸²æŸ“ä¸ºç‹¬ç«‹ç»„ä»¶</h2><p>è¿™ä¸€ç‚¹åœ¨å¾ªç¯æ¸²æŸ“é›†åˆç»„ä»¶æ—¶å°¤å…¶é‡è¦ï¼ŒReact åœ¨æ¸²æŸ“å¤§å‹é›†åˆæ˜¯æ€§èƒ½ååˆ†ç³Ÿç³•ï¼ŒåŸå› æ˜¯ React ä¼šåœ¨æ¯æ¬¡æ›´æ–°ä¸­å…¨éƒ¨é‡æ–°æ¸²æŸ“ï¼Œå› æ­¤å»ºè®®å°†æ¸²æŸ“é›†åˆçš„éƒ¨åˆ†è£…ä¸ºç‹¬ç«‹çš„ç»„ä»¶æ¸²æŸ“<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">const</span> &#123;todos, user&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">return</span> (&lt;div&gt;</div><div class="line">            &#123;user.name&#125;</div><div class="line">            &lt;ul&gt;</div><div class="line">                &#123;todos.map(todo =&gt; &lt;TodoView todo=&#123;todo&#125; key=&#123;todo.id&#125; /&gt;)&#125;</div><div class="line">            &lt;/ul&gt;</div><div class="line">        &lt;/div&gt;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Good</span></div><div class="line"><span class="comment">// å½“ user.name æ›´æ–°æ—¶ï¼Œåˆ—è¡¨ä¸ä¼šé‡æ–°æ¸²æŸ“</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">const</span> &#123;todos, user&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="keyword">return</span> (&lt;div&gt;</div><div class="line">            &#123;user.name&#125;</div><div class="line">            &lt;TodosView todos=&#123;todos&#125; /&gt;</div><div class="line">        &lt;/div&gt;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class TodosView extends Component &#123;</div><div class="line">    render() &#123;</div><div class="line">        const &#123;todos&#125; = this.props;</div><div class="line">        return (&lt;ul&gt;</div><div class="line">            &#123;todos.map(todo =&gt; &lt;TodoView todo=&#123;todo&#125; key=&#123;todo.id&#125; /&gt;)&#125;</div><div class="line">        &lt;/ul&gt;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="å°½æ—©ç»‘å®šæ–¹æ³•"><a href="#å°½æ—©ç»‘å®šæ–¹æ³•" class="headerlink" title="å°½æ—©ç»‘å®šæ–¹æ³•"></a>å°½æ—©ç»‘å®šæ–¹æ³•</h2><p>åœ¨ render() ä¸­ç»‘å®šçš„æ–¹æ³•åº”è¯¥å°½æ—©å£°æ˜ï¼Œè€Œä¸æ˜¯åœ¨æ¸²æŸ“æ—¶å®šä¹‰<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Bad</span></div><div class="line">render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;MyWidget onClick=&#123;() =&gt; &#123; alert(this.state.text) &#125;&#125; /&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Good</span></div><div class="line"><span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">handleClick() &#123;</div><div class="line">    alert(<span class="keyword">this</span>.state.text);</div><div class="line">&#125;</div><div class="line"></div><div class="line">render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;MyWidget onClick=&#123;this.handleClick&#125; /&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="ä¸å˜ç»„ä»¶ç¦ç”¨æ›´æ–°"><a href="#ä¸å˜ç»„ä»¶ç¦ç”¨æ›´æ–°" class="headerlink" title="ä¸å˜ç»„ä»¶ç¦ç”¨æ›´æ–°"></a>ä¸å˜ç»„ä»¶ç¦ç”¨æ›´æ–°</h2><p>å¯¹äºä¸éœ€è¦æ›´æ–°çš„ç»„ä»¶ï¼Œå¯ä»¥åœ¨ <code>shouldComponentUpdate()</code> ä¸­ <code>return false</code>ï¼Œæˆ–è€…ä½¿ç”¨ <a href="https://facebook.github.io/react/docs/components-and-props.html" target="_blank" rel="external">Stateless Component</a><br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Bad</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> &lt;div&gt;&lt;img src='logo.png' /&gt;&lt;/div&gt;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    shouldComponentUpdate() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> &lt;div&gt;&lt;img src='logo.png' /&gt;&lt;/div&gt;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// or Stateless Component</div><div class="line">const Logo = () =&gt; &lt;div&gt;&lt;img src='logo.png' /&gt;&lt;/div&gt;;</div></pre></td></tr></table></figure><h5 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h5><ul><li><a href="https://github.com/markerikson/react-redux-links/blob/master/react-performance.md" target="_blank" rel="external">React performance</a></li><li><a href="https://reactjsnews.com/how-to-make-your-react-apps-10x-faster" target="_blank" rel="external">How to Make Your React Apps 15x Faster</a></li><li><a href="https://daveceddia.com/avoid-bind-when-passing-props/" target="_blank" rel="external">Avoid bind when passing props</a></li><li><a href="https://mobxjs.github.io/mobx/best/react-performance.html" target="_blank" rel="external">Optimizing rendering React components</a></li></ul></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2016/12/19/Webpack-åŠ¨æ€åŠ è½½/" itemprop="url">Webpack åŠ¨æ€åŠ è½½</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time itemprop="dateCreated" datetime="2016-12-19T15:28:17+08:00" content="2016-12-19">2016-12-19 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/æŠ€æœ¯/" itemprop="url" rel="index"><span itemprop="name">æŠ€æœ¯</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>åœ¨ Webpack çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸€å¼€å§‹äººä»¬éƒ½ä¹ æƒ¯äº†å°†ä¸€åˆ‡ä¸œè¥¿ <code>import</code> è¿›æ¥ï¼Œè¿™æ ·åšå¾ˆç¬¦åˆé€»è¾‘ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡é‡ä¸æ–­å¢åŠ ï¼Œä¼šå‘ç° bundle çš„ä½“ç§¯ä¸æ–­å¢å¤§ï¼Œå¯¼è‡´é¦–æ¬¡åŠ è½½éå¸¸ç¼“æ…¢ï¼Œæ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªè·¯ç”±æ˜ å°„çš„å¯¹è±¡æ˜¯è¿™æ ·å†™çš„<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="string">'/shop'</span>: <span class="built_in">require</span>(<span class="string">'components/Shop/Home'</span>),</div><div class="line"><span class="string">'/shop/goods'</span>: <span class="built_in">require</span>(<span class="string">'components/Shop/Goods'</span>),</div><div class="line"><span class="string">'/shop/goods-detail'</span>: <span class="built_in">require</span>(<span class="string">'components/Shop/Detail'</span>),</div><div class="line">...</div></pre></td></tr></table></figure><p></p><p>æœ€ç»ˆè¿™äº›æ¨¡å—éƒ½ä¼šè¢«æ‰“åŒ…è¿› bundleï¼Œè€Œæˆ‘æƒ³è¦çš„æ•ˆæœæ˜¯æ¯æ¬¡åªåŠ è½½å½“å‰è·¯ç”±å¯¹åº”çš„æ¨¡å—ï¼Œè¿™ä¸€ç‚¹ Webpack å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³æ–¹æ¡ˆ</p><h2 id="Code-Splitting"><a href="#Code-Splitting" class="headerlink" title="Code Splitting"></a><a href="http://webpack.github.io/docs/code-splitting.html" target="_blank" rel="external">Code Splitting</a></h2><p>Code Splitting çš„åšæ³•æ˜¯åœ¨ä»£ç ä¸­å®šä¹‰åˆ†ç¦»ç‚¹ï¼Œåœ¨è¿™ä¸ªåˆ†ç¦»ç‚¹å†…ä¾èµ–çš„æ¨¡å—ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«å•ç‹¬æ‰“åŒ…ï¼Œå¹¶åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½è¿›æ¥</p><p>Code Splitting æ”¯æŒ AMD å’Œ CommonJs ä¸¤ç§é£æ ¼</p><h4 id="CommonJs"><a href="#CommonJs" class="headerlink" title="CommonJs:"></a>CommonJs:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å‚æ•°ä¸€ module-a, module-b ä½œä¸ºä¾èµ–ä¼šé¦–å…ˆåŠ è½½</span></div><div class="line"><span class="comment">// å‚æ•°äºŒæ˜¯ callback å‡½æ•°ï¼Œå‚æ•° require å¯ä»¥åŠ è½½æ¨¡å—</span></div><div class="line"><span class="comment">// å‚æ•°ä¸‰æ˜¯ä¸ºè¿™ä¸ªåˆ†ç¦»ç‚¹æ¨¡å—å‘½å</span></div><div class="line"><span class="comment">// æœ€ç»ˆ module-a module-b module-c ä¼šè¢«æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶</span></div><div class="line"><span class="built_in">require</span>.ensure([<span class="string">"module-a"</span>, <span class="string">"module-b"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"module-a"</span>);</div><div class="line">    <span class="keyword">var</span> c = <span class="built_in">require</span>(<span class="string">"module-c"</span>);</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;, <span class="string">'bundle'</span>);</div></pre></td></tr></table></figure><p>æ³¨æ„ï¼šrequire.ensure çš„æ¨¡å—åªä¼šè¢«ä¸‹è½½ä¸‹æ¥ï¼Œä¸ä¼šè¢«æ‰§è¡Œï¼Œåªæœ‰åœ¨å›è°ƒå‡½æ•°ä½¿ç”¨require(æ¨¡å—å)åï¼Œè¿™ä¸ªæ¨¡å—æ‰ä¼šè¢«æ‰§è¡Œã€‚</p><h4 id="AMD"><a href="#AMD" class="headerlink" title="AMD:"></a>AMD:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å‚æ•°ä¸€åŒæ ·ä¼šé¦–å…ˆè¢«åŠ è½½ï¼Œå¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ callback</span></div><div class="line"><span class="built_in">require</span>([<span class="string">"module-a"</span>, <span class="string">"module-b"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = <span class="built_in">require</span>(<span class="string">"module-c"</span>);</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>æ³¨æ„ callback æ˜¯å¿…é¡»çš„</p><p>å½“ä»£ç è¿è¡Œæ—¶ Webpack ä¼šåœ¨æ–‡æ¡£ä¸­åŠ¨æ€æ’å…¥<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span> charset=<span class="string">"utf-8"</span> <span class="keyword">async</span>=<span class="string">""</span> src=<span class="string">"1.bundle.js"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure><p></p><p>Webpack åªä¼šå½“ä»£ç è¿è¡Œæ—¶æ‰å»åŠ è½½ï¼Œå‡å¦‚è¯´æˆ‘å®šä¹‰äº†å¤šä¸ªåˆ†ç¦»ç‚¹<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"module-a"</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</div><div class="line">    <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">"module-b"</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>module-b æ˜¯ä¸ä¼šè¢«åŠ è½½ï¼Œåˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å°†é‚£ä¸ªè·¯ç”±æ˜ å°„ä¿®æ”¹ä¸€ä¸‹<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="string">'/shop'</span>: <span class="function"><span class="params">callback</span> =&gt;</span> <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">    callback(<span class="built_in">require</span>(<span class="string">"components/Shop/Home"</span>));</div><div class="line">&#125;),</div><div class="line"><span class="string">'/shop/goods'</span>: <span class="function"><span class="params">callback</span> =&gt;</span> <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">    callback(<span class="built_in">require</span>(<span class="string">"components/Shop/Goods"</span>));</div><div class="line">&#125;),</div><div class="line"><span class="string">'/shop/goods-detail'</span>: <span class="function"><span class="params">callback</span> =&gt;</span> <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">    callback(<span class="built_in">require</span>(<span class="string">"components/Shop/Detail"</span>));</div><div class="line">&#125;),</div><div class="line">...</div></pre></td></tr></table></figure><p></p><p>åœ¨è·¯ç”±è§£æçš„ä»£ç ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åŸæ¥çš„åŒæ­¥è·å–æ¨¡å—å†™æ³•</span></div><div class="line"><span class="keyword">var</span> <span class="built_in">module</span> = router.match(location.href);</div><div class="line">render(<span class="built_in">module</span>);</div><div class="line"></div><div class="line"><span class="comment">// ç°ä½¿ç”¨å¼‚æ­¥æ–¹æ³•è·å¾—</span></div><div class="line">router.match(location.href, <span class="function"><span class="keyword">function</span>(<span class="params">module</span>) </span>&#123;</div><div class="line">    render(<span class="built_in">module</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p></p><p>ç”±äº require.ensure å†™æ³•è¿‡äºå†—é•¿ï¼Œæˆ‘æ›¾æƒ³æŠŠè¿™æ®µå°è£…èµ·æ¥ï¼Œä½†æ˜¯å‘ç°æ˜¯ä¸å¯è¡Œçš„ï¼Œrequire.ensure æ–¹æ³•ååˆ†ç‰¹æ®Šï¼Œå¿…é¡»ä»¥å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä»¥ä¸‹æ–¹å¼æ— æ•ˆï¼</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getModule</span>(<span class="params">path, callback</span>) </span>&#123;</div><div class="line">    <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</div><div class="line">        callback(<span class="built_in">require</span>(path));</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">...</div><div class="line"><span class="string">'/shop'</span>: <span class="function"><span class="params">callback</span> =&gt;</span> getModule(<span class="string">"components/Shop/Home"</span>, callback),</div><div class="line">...</div></pre></td></tr></table></figure><p></p><h2 id="è¯·æ±‚è·¯ç»é…ç½®"><a href="#è¯·æ±‚è·¯ç»é…ç½®" class="headerlink" title="è¯·æ±‚è·¯ç»é…ç½®"></a>è¯·æ±‚è·¯ç»é…ç½®</h2><p>æ ¹æ® Code Splitting çš„åŸç†ï¼Œæ¨¡å—è¯·æ±‚çš„é»˜è®¤ hostname æ˜¯å’Œå½“å‰é¡µé¢ç›¸åŒçš„ï¼Œæ¯”å¦‚è®¿é—® <code>http://www.x.com/</code> é‚£ä¹ˆæ¨¡å—çš„è¯·æ±‚å°±æ˜¯ <code>http://www.x.com/1.bundle.js</code></p><p>å¦‚æœè¦è®¾ç½®åœ¨åˆ«çš„åŸŸè·å–ï¼Œå¯ä»¥åœ¨ <code>output.publicPath</code> ä¸­è®¾ç½®<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">output: &#123;</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'http://cdn.x.com/'</span></div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure><p></p><p>é‚£ä¹ˆè¯·æ±‚å°±å˜æˆäº† <code>http://cdn.x.com/1.bundle.js</code></p><p>è¿™æ˜¯ä¸€ç§åœ¨ç¼–è¯‘é˜¶æ®µé…ç½®çš„æ–¹æ³•ï¼Œå¦‚æœè·¯ç»éœ€è¦åˆ°è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šï¼Œå¯ä»¥åœ¨å…¥å£æ–‡ä»¶ä¸­è®¾ç½®<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">__webpack_public_path__ = <span class="string">`http://<span class="subst">$&#123;config.host&#125;</span>:/`</span></div></pre></td></tr></table></figure><p></p><p>è¯¦ç»†ç”¨æ³•å‚è€ƒ <a href="https://webpack.github.io/docs/configuration.html#output-path" target="_blank" rel="external">https://webpack.github.io/docs/configuration.html#output-path</a></p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2016/12/15/ä¸€ä¸ªæ–°çš„å¼€å§‹/" itemprop="url">ä¸€ä¸ªæ–°çš„å¼€å§‹</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time itemprop="dateCreated" datetime="2016-12-15T23:03:43+08:00" content="2016-12-15">2016-12-15 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/éšç¬”/" itemprop="url" rel="index"><span itemprop="name">éšç¬”</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>æ¥åˆ°äº†è¿™ä¸ªæ–°çš„åšå®¢ï¼Œæƒ³ç€å¾—å†™ä¸€ç¯‡å…·æœ‰çºªå¿µæ„ä¹‰çš„æ–‡ç« ï¼Œæƒ³æ¥æƒ³å»ä¹Ÿä¸çŸ¥ä»ä½•è¯´èµ·ï¼Œæˆ‘è¿™ä¸ªäººçš„å™è¿°èƒ½åŠ›ä¸€èˆ¬ï¼Œå†™ä¸œè¥¿æèµ·ç¬”åŠå¤©ä¹Ÿä¸‹ä¸å»ï¼Œæœ€åˆæœ‰å¼€åšå®¢çš„æƒ³æ³•ä¹Ÿæ˜¯ä¸ºäº†é”»ç‚¼ä¸€ä¸‹æ–‡ç¬”ï¼Œç„¶è€Œå…¶å®å¹¶æ²¡æœ‰å†™å¤šå°‘ä¸œè¥¿ï¼Œå³ä½¿å†™ä¹Ÿæ˜¯ç±»ä¼¼äºç¬”è®°ä¹‹ç±»çš„ï¼Œæ²¡ä»€ä¹ˆè¯­è¨€ç»„ç»‡åœ¨é‡Œé¢ã€‚æœ€è¿‘ç”±äºæœåŠ¡å™¨åˆ°æœŸï¼Œä¹Ÿä¸æƒ³æè¿™ä¸ªé’±äº†ï¼Œå¹²è„†å¼„äº†ä¸ª Hexo + Github Pagesã€‚åœ¨å¯¼å…¥ä¹‹å‰åšå®¢çš„æ—¶å€™å‘ç°é¡µé¢æ ¼å¼å˜å¾—ä¹±ä¸ƒå…«ç³Ÿï¼Œæœ‰äº›å›¾ç‰‡ä¹ŸæŒ‚äº†ï¼Œè€Œä¸”å†™çš„å†…å®¹ç°åœ¨çœ‹çœ‹ä¹Ÿè§‰å¾—å¹¼é½¿çš„å¾ˆï¼Œå¹²è„†ç»Ÿç»Ÿä¸è¦ï¼Œä¸€åˆ‡éƒ½ä»å¤´å¼€å§‹</p><p>å…³äºå†™åšå®¢è¿™ä»¶äº‹æƒ…å‘¢ï¼Œæˆ‘è®¤ä¸ºå¯¹å­¦ä¹ æŒæ¡æ–°çŸ¥è¯†æ˜¯ç‰¹åˆ«æœ‰å¸®åŠ©çš„ï¼Œæœ€é‡è¦çš„2ä¸ªä½œç”¨æ˜¯</p><ul><li>æŠŠæ‰€å­¦åˆ°çš„çŸ¥è¯†è½¬æ¢æˆè‡ªå·±çš„æ–‡å­—ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªå¯¹çŸ¥è¯†çš„æ•´ç†ã€æ€è€ƒã€å†…åŒ–çš„è¿‡ç¨‹</li><li>äººè„‘å®¹é‡æœ‰é™ï¼Œè¶æƒ³æ³•è¿˜çƒ­ä¹çš„æ—¶å€™è®°å½•ä¸‹æ¥ï¼Œåˆ†é—¨åˆ«ç±»ç®¡ç†ï¼Œä¾¿äºæ—¥åæŸ¥é˜…</li></ul><p>åšå®¢è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ä½œç”¨æ˜¯ <strong>è£…é€¼</strong>ï¼Œè™½è¯´ç›®å‰æ²¡å‡ ä¸ªäººèƒ½çœ‹åˆ°è¿™äº›æ–‡å­—ï¼Œä½†æ˜¯æœªæ¥æ€»æœ‰é‚£ä¹ˆä¸ªäººæ— æ„èµ°è¿›æ¥ï¼Œä»è€Œå‘ç°æˆ‘é»˜é»˜è€•è€˜ç€çš„å°å¤©åœ°ï¼Œå‘è‡ªå†…å¿ƒçš„ä¸ºæˆ‘ç‚¹ğŸ‘ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿå°±è¶³å¤Ÿäº†</p><p>å½“ç„¶å†™åšå®¢æœ€é‡è¦çš„æ˜¯åšæŒï¼Œçºµè§‚æˆ‘çš„åšå®¢å²ï¼Œå‘ç°è‡ªå·±å¹¶ä¸æ˜¯é‚£ä¹ˆå‹¤å¥‹ï¼Œä»3å¹´å‰å¼€å§‹ï¼Œå¤šçš„æ—¶å€™ä¹Ÿå°±ä¸€ä¸¤ä¸ªæœˆå†™ä¸€ç¯‡ï¼Œæœ‰çš„æ—¶å€™åŠå¹´æ‰å†™ä¸€ç¯‡ï¼Œæƒ³æƒ³å½“åˆè®¾å®šçš„æ¯æ˜ŸæœŸå†™ä¸€ç¯‡çš„ç›®æ ‡ç›¸å»ç”šè¿œï¼Œäººå‘ï¼Œéª¨å­é‡Œéƒ½æ˜¯æ‡’æ±‰ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šçš„å²æ•°ï¼Œä¼šå‘ç°åšæŒçš„åŠ›é‡æœ‰å¤šä¹ˆå¼ºå¤§ï¼Œæ»´æ°´ç©¿çŸ³çš„é“ç†ä¸æ˜¯å˜´ä¸Šè¯´è¯´å°±æ‡‚çš„ï¼Œä»¥å‰æ€»è§‰å¾—æ—¶é—´å¤šçš„æ˜¯ï¼Œå¯æ˜¯æ—¶é—´å“ªå¤©ä¸æ˜¯24å°æ—¶ï¼Œä½•æ—¶å¤šå‡ºæ¥è¿‡ï¼Œä¸å»çæƒœåˆ°å¤´æ¥è’åºŸçš„æ˜¯è‡ªå·±ï¼Œè¿™æ¬¡é‡å¼€ blogï¼Œæˆ‘ä¹Ÿä¸ç»™è‡ªå·±å®šä»€ä¹ˆç›®æ ‡äº†ï¼Œå¹³æ—¶å¤šåŠ ä»¥æ€è€ƒå’Œæ€»ç»“ï¼ŒåŠªåŠ›å…‹æœå†…å¿ƒçš„æ‡’æ±‰ï¼Œæœªæ¥å¯èƒ½è¿˜æ˜¯å…‰æ˜çš„</p><p>å…³äºè¿™ä¸ªåšå®¢ï¼Œä½¿ç”¨çš„æ˜¯ <a href="https://hexo.io" target="_blank" rel="external">Hexo</a>ï¼Œä¹‹å‰å®Œå…¨æ²¡æ¥è§¦è¿‡é™æ€ blogï¼Œç»äººæ¨èåå‘ç°ç‰¹åˆ«ç®€æ´ï¼Œä¸éœ€è¦éƒ¨ç½²ä¸€å †ä¸œè¥¿ï¼Œä¹Ÿæ²¡æœ‰åå°ç•Œé¢ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯çº¯ç²¹çš„ä¸“æ³¨äºå†™ä½œï¼Œè¿™ç§è¿”ç’å½’çœŸçš„ä½“éªŒçœŸçš„æ£’æäº†ï¼Œè€Œä¸” Hexo æ˜¯å¼€æºçš„ï¼Œæƒ³è¦ä»€ä¹ˆç›´æ¥è‡ªå·±æŠ˜è…¾ï¼Œå¯¹äºç¨‹åºå‘˜ç‰¹åˆ«å‹å¥½ã€‚ç«™ç‚¹æ˜¯æ‰˜ç®¡åœ¨ Github Pagesï¼Œå…¨çƒ CDN åˆ†å¸ƒï¼ŒæœåŠ¡å™¨æ–¹é¢çš„ä¸€æ¦‚ä¸ç”¨æ“å¿ƒã€‚HTTPs è¯ä¹¦ç”¨çš„æ˜¯ <a href="https://www.cloudflare.com/" target="_blank" rel="external">Cloudflare</a> æä¾›çš„å…è´¹æœåŠ¡ï¼Œåæ­£åªè¦ä»–ä»¬å®¶è¿˜å¼€ç€ï¼Œæˆ‘å°±å¯ä»¥ä¸€ç›´ç”¨ä¸‹å»â€¦â€¦</p><p>2016 å¹´æœ€åå‰©ä¸‹åŠä¸ªæœˆï¼Œä¹Ÿå¿«è¦åˆ°æˆ‘çš„ç”Ÿæ—¥äº†ï¼Œèº«ä¸Šçš„ç§ç§æ— çŸ¥ã€æµ®èºä¼šä¸ä¼šéšç€å¹´é¾„çš„å¢é•¿è€Œå‡å°‘ä¸€ç‚¹å‘¢ï¼Ÿæœªæ¥çš„é“è·¯åˆå°†ä¼šæŒ‡å¼•æˆ‘é€šå‘ä½•å¤„ï¼Ÿå¹¸ç¦ç©¶ç«Ÿå¯¹æˆ‘æ¥è¯´æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿåªæœ‰ä¸€ç‚¹æˆ‘æ˜¯å¯ä»¥ç¡®è®¤çš„ï¼Œçœ¼å‰çš„è¿™æ¡é“è·¯æ˜¯çœŸå®çš„ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°èµ°ä¸‹å»ï¼Œæœ€ç»ˆè¿™äº›ç–‘é—®éƒ½ä¼šå¾—åˆ°ç­”æ¡ˆï¼Œæ‰€ä»¥ï¼Œæ•´ç†å¥½æ€ç»ªï¼Œæ”¶æ‹¾å¥½å¿ƒæƒ…ï¼Œå¦‚åŒè¿™ä¸ªå´­æ–°çš„åšå®¢ï¼Œè¿æ¥æœªæ¥çš„äººç”Ÿå§ã€‚<strong>è™½åƒä¸‡é‡Œ å¾å¾€çŸ£ï¼</strong></p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></section></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Zehao Zhang"><p class="site-author-name" itemprop="name">Zehao Zhang</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">2</span> <span class="site-state-item-name">åˆ†ç±»</span></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">3</span> <span class="site-state-item-name">æ ‡ç­¾</span></div></nav><div class="links-of-author motion-element"></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2017</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Zehao Zhang</span> <a href="http://www.miibeian.gov.cn/" target="_blank">æ²ªICPå¤‡16039653å·</a></div><div class="powered-by">ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div><div class="theme-info">ä¸»é¢˜ - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script></body></html>